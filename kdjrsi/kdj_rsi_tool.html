<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KDJ + RSI æ™ºèƒ½åˆ¤æ–­å·¥å…·</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Helvetica, Arial, sans-serif;
      background: #f2f2f7;
      padding: 20px;
    }
    .container {
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    h2 {
      font-size: 20px;
      text-align: center;
      margin-bottom: 20px;
    }
    label {
      font-weight: 600;
      margin-top: 15px;
      display: block;
    }
    select {
      width: 100%;
      padding: 12px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 12px;
      font-size: 16px;
      background: #f9f9f9;
    }
    button {
      width: 100%;
      margin-top: 30px;
      padding: 14px;
      background: #007AFF;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      cursor: pointer;
    }
    .result {
      margin-top: 20px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      color: #333;
      white-space: pre-line;
    }
    canvas {
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>KDJ + RSI æ™ºèƒ½åˆ¤æ–­</h2>

    <label for="j">J å€¼ï¼ˆåæ˜ çŸ­æœŸå¼ºå¼±ï¼Œå¯èƒ½ä¸ºè´Ÿï¼‰</label>
    <select id="j">
      <option value="">è¯·é€‰æ‹©</option>
      <option value="-30">-30ï¼ˆæåº¦è¶…å–ï¼‰</option>
      <option value="-20">-20ï¼ˆæå¼±ï¼‰</option>
      <option value="-10">-10ï¼ˆåå¼±ï¼‰</option>
      <option value="0">0ï¼ˆæä½ï¼‰</option>
      <option value="10">10ï¼ˆä½ä½ï¼‰</option>
      <option value="20">20ï¼ˆåä½ï¼‰</option>
      <option value="30">30ï¼ˆä¸­ä½ï¼‰</option>
      <option value="40">40ï¼ˆä¸­ç­‰ï¼‰</option>
      <option value="50">50ï¼ˆä¸­æ€§ï¼‰</option>
      <option value="60">60ï¼ˆç•¥å¼ºï¼‰</option>
      <option value="70">70ï¼ˆåé«˜ï¼‰</option>
      <option value="80">80ï¼ˆå¼ºåŠ¿ï¼‰</option>
      <option value="90">90ï¼ˆè¶…ä¹°ï¼‰</option>
      <option value="100">100ï¼ˆæå¼ºï¼‰</option>
      <option value="110">110ï¼ˆè¿‡çƒ­ï¼‰</option>
    </select>

    <label for="rsi">RSI å€¼ï¼ˆåæ˜ ä¹°å–å¼ºåº¦ï¼‰</label>
    <select id="rsi">
      <option value="">è¯·é€‰æ‹©</option>
      <option value="-10">-10ï¼ˆå¼‚å¸¸æå¼±ï¼‰</option>
      <option value="0">0ï¼ˆæå¼±ï¼‰</option>
      <option value="10">10ï¼ˆè¶…å–ï¼‰</option>
      <option value="20">20ï¼ˆåå¼±ï¼‰</option>
      <option value="30">30ï¼ˆä½ä½ï¼‰</option>
      <option value="40">40ï¼ˆä¸­ä½ï¼‰</option>
      <option value="50">50ï¼ˆä¸­æ€§ï¼‰</option>
      <option value="60">60ï¼ˆä¸­å¼ºï¼‰</option>
      <option value="70">70ï¼ˆåå¼ºï¼‰</option>
      <option value="80">80ï¼ˆè¶…ä¹°ï¼‰</option>
      <option value="90">90ï¼ˆå¼ºåŠ¿ï¼‰</option>
      <option value="100">100ï¼ˆæå¼ºï¼‰</option>
    </select>

    <label for="volume">æˆäº¤é‡çŠ¶æ€ï¼ˆä¸å‡é‡å¯¹æ¯”ï¼‰</label>
    <select id="volume">
      <option value="">è¯·é€‰æ‹©</option>
      <option value="low">ç¼©é‡ï¼ˆ<0.7å€ï¼‰</option>
      <option value="normal">ä¸­æ€§ï¼ˆâ‰ˆå‡é‡ï¼‰</option>
      <option value="high">æ”¾é‡ï¼ˆ>1.5å€ï¼‰</option>
    </select>

    <label for="cycle">åˆ†æå‘¨æœŸ</label>
    <select id="cycle">
      <option value="day">æ—¥K</option>
      <option value="week">å‘¨K</option>
      <option value="hour">å°æ—¶K</option>
    </select>

    <button onclick="judgeSignal()">åˆ¤æ–­å½“å‰çŠ¶æ€</button>
    <div class="result" id="result"></div>
    <canvas id="previewChart" height="200"></canvas>
    <p id="chart-note" style="font-size:14px;text-align:center;color:#666;margin-top:10px;display:none;">
      å›¾è§£è¯´æ˜ï¼šè“çº¿è¿æ¥å½“å‰ RSI å’Œ J å€¼ï¼Œåæ˜ å½“å‰ä¸¤ä¸ªæŒ‡æ ‡çš„ç›¸å¯¹ä½ç½®ã€‚é«˜ä½åŒºåŸŸï¼ˆæ¥è¿‘é¡¶éƒ¨ï¼‰é£é™©å¤§ï¼Œä½ä½åŒºåŸŸï¼ˆæ¥è¿‘åº•éƒ¨ï¼‰å…³æ³¨æœºä¼šã€‚
    </p>
  </div>

  <script>
    function judgeSignal() {
      const j = parseFloat(document.getElementById("j").value);
      const rsi = parseFloat(document.getElementById("rsi").value);
      const volume = document.getElementById("volume").value;
      const cycle = document.getElementById("cycle").value;
      const resultBox = document.getElementById("result");

      if (isNaN(j) || isNaN(rsi) || !cycle) {
        resultBox.innerText = "âš ï¸ è¯·å®Œæ•´é€‰æ‹© J å€¼ã€RSI å€¼ å’Œ å‘¨æœŸ";
        return;
      }

      let signal = "ğŸ“Š å½“å‰å¸‚åœºæš‚æ— æ˜æ˜¾ä¿¡å·ï¼Œå»ºè®®è€å¿ƒè§‚å¯Ÿï¼Œä¸å®œè´¸ç„¶æ“ä½œã€‚";

      if (j <= 10 && rsi <= 30) {
        signal = "ğŸ“‰ Jå€¼ä¸RSIéƒ½å¤„äºä½ä½ï¼Œè¯´æ˜å¸‚åœºå¤„åœ¨ç›¸å¯¹åº•éƒ¨åŒºåŸŸï¼Œå¯ä»¥å…³æ³¨é€¢ä½å¸çº³çš„æœºä¼šã€‚";
      } else if (j >= 90 && rsi >= 70) {
        signal = "ğŸ“ˆ Jå€¼ä¸RSIéƒ½åœ¨é«˜ä½ï¼Œå¸‚åœºçŸ­æœŸæˆ–æœ‰è§é¡¶å‹åŠ›ï¼Œå»ºè®®é€æ­¥å‡ä»“æˆ–è€ƒè™‘æ­¢ç›ˆã€‚";
      } else if (j <= 30 && rsi < 50) {
        signal = "ğŸ“‰ æŒ‡æ ‡åä½ï¼Œè™½ç„¶å°šæœªæç«¯ï¼Œä½†è‹¥é…åˆæˆäº¤é‡æ”¾å¤§ï¼Œå¯èƒ½å‡ºç°åå¼¹ä¿¡å·ã€‚";
      } else if (j >= 70 && rsi > 50) {
        signal = "ğŸ“ˆ æŒ‡æ ‡ç•¥åé«˜ï¼Œè‹¥æ²¡æœ‰æ”¾é‡æ”¯æŒï¼Œéœ€é˜²èŒƒå†²é«˜å›è½ã€‚";
      }

      if (volume === "low" && j > 70 && rsi > 60) {
        signal += "\nâš ï¸ å½“å‰ä¸Šæ¶¨ä½†ä¼´éšç¼©é‡ï¼Œè¯´æ˜åŠ¨åŠ›ä¸è¶³ï¼Œå¯èƒ½æ˜¯è¯±å¤šè¡Œæƒ…ï¼Œå»ºè®®è°¨æ…è¿½é«˜ã€‚";
      } else if (volume === "high" && j < 30 && rsi < 50) {
        signal += "\nâœ… æ”¾é‡ä¸‹è·ŒåæŒ‡æ ‡è½å…¥ä½ä½ï¼Œå¸‚åœºå¯èƒ½åœ¨é…é…¿åè½¬ï¼Œå€¼å¾—å…³æ³¨è¿›åœºæœºä¼šã€‚";
      }

      let cycleText = "\nå½“å‰å‘¨æœŸï¼š";
      if (cycle === "week") cycleText += "å‘¨Kï¼ˆä¸­æœŸè¶‹åŠ¿å‚è€ƒï¼Œä¿¡å·æ›´å…·å»¶ç»­æ€§ï¼‰";
      else if (cycle === "hour") cycleText += "å°æ—¶Kï¼ˆçŸ­çº¿ä¿¡å·å‚è€ƒï¼Œæ³¢åŠ¨å¿«ï¼‰";
      else cycleText += "æ—¥Kï¼ˆæ—¥å¸¸ä¸»å‚è€ƒï¼Œå¹³è¡¡æ³¢åŠ¨ä¸è¶‹åŠ¿ï¼‰";

      resultBox.innerText = signal + "\n" + cycleText;

      renderPreviewChart(j, rsi);
      document.getElementById('chart-note').style.display = 'block';
    }

    function renderPreviewChart(j, rsi) {
      const ctx = document.getElementById('previewChart').getContext('2d');
      if (window._chartInstance) window._chartInstance.destroy();
      window._chartInstance = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['RSI', 'Jå€¼'],
          datasets: [{
            label: 'æŒ‡æ ‡å€¼',
            data: [rsi, j],
            fill: false,
            borderColor: '#007AFF',
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            tooltip: { enabled: true }
          },
          scales: {
            y: {
              min: -40,
              max: 120,
              ticks: { stepSize: 20 }
            }
          }
        }
      });
    }
  </script>
</body>
</html>
